<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 900">
  <!-- Background -->
  <rect width="1000" height="900" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="500" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Real-Time Collaborative Multiplayer Game Architecture</text>
  
  <!-- Client Section -->
  <rect x="50" y="100" width="280" height="320" rx="10" ry="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2" />
  <text x="190" y="125" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Client</text>
  
  <!-- Client Components -->
  <rect x="70" y="140" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="190" y="175" font-family="Arial" font-size="14" text-anchor="middle">React UI Components</text>
  
  <rect x="70" y="210" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="190" y="245" font-family="Arial" font-size="14" text-anchor="middle">Canvas Physics Rendering</text>
  
  <rect x="70" y="280" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="190" y="315" font-family="Arial" font-size="14" text-anchor="middle">Monaco Code Editor</text>
  
  <rect x="70" y="350" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#1890ff" stroke-width="1" />
  <text x="190" y="385" font-family="Arial" font-size="14" text-anchor="middle">Socket.io Client</text>
  
  <!-- Server Section -->
  <rect x="670" y="100" width="280" height="320" rx="10" ry="10" fill="#f6ffed" stroke="#52c41a" stroke-width="2" />
  <text x="810" y="125" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Server</text>
  
  <!-- Server Components -->
  <rect x="690" y="140" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="810" y="175" font-family="Arial" font-size="14" text-anchor="middle">Express.js / Node.js</text>
  
  <rect x="690" y="210" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="810" y="245" font-family="Arial" font-size="14" text-anchor="middle">Socket.io Server</text>
  
  <rect x="690" y="280" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="810" y="315" font-family="Arial" font-size="14" text-anchor="middle">Room Manager</text>
  
  <rect x="690" y="350" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#52c41a" stroke-width="1" />
  <text x="810" y="385" font-family="Arial" font-size="14" text-anchor="middle">Game State Manager</text>
  
  <!-- Code Execution Sandbox Section -->
  <rect x="360" y="480" width="280" height="380" rx="10" ry="10" fill="#fff2e8" stroke="#fa541c" stroke-width="2" />
  <text x="500" y="505" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Code Execution Sandbox</text>
  
  <!-- Sandbox Components -->
  <rect x="380" y="520" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#fa541c" stroke-width="1" />
  <text x="500" y="555" font-family="Arial" font-size="14" text-anchor="middle">VM2 Sandbox Environment</text>
  
  <rect x="380" y="590" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#fa541c" stroke-width="1" />
  <text x="500" y="625" font-family="Arial" font-size="14" text-anchor="middle">Malicious Code Detection</text>
  
  <rect x="380" y="660" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#fa541c" stroke-width="1" />
  <text x="500" y="695" font-family="Arial" font-size="14" text-anchor="middle">Execution Timeout Protection</text>
  
  <rect x="380" y="730" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#fa541c" stroke-width="1" />
  <text x="500" y="765" font-family="Arial" font-size="14" text-anchor="middle">Limited API Exposure</text>
  
  <rect x="380" y="800" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#fa541c" stroke-width="1" />
  <text x="500" y="835" font-family="Arial" font-size="14" text-anchor="middle">Code Voting System</text>
  
  <!-- Collaborative Workflow Section -->
  <rect x="50" y="480" width="280" height="240" rx="10" ry="10" fill="#f9f0ff" stroke="#722ed1" stroke-width="2" />
  <text x="190" y="505" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Collaborative Workflow</text>
  
  <!-- Workflow Steps -->
  <rect x="70" y="520" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#722ed1" stroke-width="1" />
  <text x="190" y="555" font-family="Arial" font-size="14" text-anchor="middle">Real-time Code Synchronization</text>
  
  <rect x="70" y="590" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#722ed1" stroke-width="1" />
  <text x="190" y="625" font-family="Arial" font-size="14" text-anchor="middle">Code Proposal &amp; Voting</text>
  
  <rect x="70" y="660" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#722ed1" stroke-width="1" />
  <text x="190" y="695" font-family="Arial" font-size="14" text-anchor="middle">History Tracking &amp; Time Travel</text>
  
  <!-- Data Flow Section -->
  <rect x="670" y="480" width="280" height="240" rx="10" ry="10" fill="#fcffe6" stroke="#a0d911" stroke-width="2" />
  <text x="810" y="505" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Data Flow</text>
  
  <!-- Data Flow Steps -->
  <rect x="690" y="520" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#a0d911" stroke-width="1" />
  <text x="810" y="555" font-family="Arial" font-size="14" text-anchor="middle">Player Position Updates</text>
  
  <rect x="690" y="590" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#a0d911" stroke-width="1" />
  <text x="810" y="625" font-family="Arial" font-size="14" text-anchor="middle">Code Editor Synchronization</text>
  
  <rect x="690" y="660" width="240" height="60" rx="5" ry="5" fill="#ffffff" stroke="#a0d911" stroke-width="1" />
  <text x="810" y="695" font-family="Arial" font-size="14" text-anchor="middle">Physics Rule Propagation</text>
  
  <!-- Connection Arrows -->
  <!-- Client to Server -->
  <path d="M330 200 C 430 200, 570 200, 670 200" stroke="#1890ff" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="500" y="185" font-family="Arial" font-size="12" text-anchor="middle">Game Events</text>
  
  <!-- Server to Client -->
  <path d="M670 250 C 570 250, 430 250, 330 250" stroke="#52c41a" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="500" y="235" font-family="Arial" font-size="12" text-anchor="middle">State Updates</text>
  
  <!-- Client to Collaborative Workflow -->
  <path d="M190 420 L 190 480" stroke="#722ed1" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Collaborative Workflow to Server -->
  <path d="M330 600 C 430 500, 570 400, 670 350" stroke="#722ed1" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Server to Sandbox -->
  <path d="M810 420 L 810 600 L 620 600" stroke="#fa541c" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="720" y="585" font-family="Arial" font-size="12" text-anchor="middle">Code for Execution</text>
  
  <!-- Sandbox to Server -->
  <path d="M620 650 L 690 650" stroke="#fa541c" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  <text x="655" y="635" font-family="Arial" font-size="12" text-anchor="middle">Results</text>
  
  <!-- Server to Data Flow -->
  <path d="M810 420 L 810 480" stroke="#a0d911" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Data Flow to Client -->
  <path d="M690 700 C 500 750, 330 650, 190 420" stroke="#a0d911" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Key Process Flow - Code Execution -->
  <rect x="50" y="730" width="280" height="150" rx="10" ry="10" fill="#fff0f6" stroke="#eb2f96" stroke-width="2" />
  <text x="190" y="755" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Code Execution Flow</text>
  
  <text x="70" y="780" font-family="Arial" font-size="12" text-anchor="start">1. Player proposes code change</text>
  <text x="70" y="800" font-family="Arial" font-size="12" text-anchor="start">2. Security check for malicious code</text>
  <text x="70" y="820" font-family="Arial" font-size="12" text-anchor="start">3. All players vote (4-second window)</text>
  <text x="70" y="840" font-family="Arial" font-size="12" text-anchor="start">4. If approved, code is executed in sandbox</text>
  <text x="70" y="860" font-family="Arial" font-size="12" text-anchor="start">5. Results update physics for all players</text>
</svg>